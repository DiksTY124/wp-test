# WordPress Doctors Test Task

Тестовое задание: реализация кастомного типа записей **«Доктора»**  
с архивом, фильтрацией, сортировкой и пагинацией.

Проект разворачивается локально через Docker.

---

## Стек

- WordPress 6.x
- PHP 8.x
- MySQL
- Docker / Docker Compose
- Чистая тема (без конструкторов)
- Кастомный плагин для бизнес-логики

---

## Архитектура и подход

Проект разделён на два уровня ответственности:

### Плагин
Отвечает за **данные и бизнес-логику**:
- Custom Post Type `doctors`
- Таксономии:
  - `specialization` (hierarchical)
  - `city` (non-hierarchical)
- Метаполя врача:
  - стаж (`experience_years`)
  - цена от (`price_from`)
  - рейтинг (`rating`)
- Фильтрация и сортировка архива через `pre_get_posts`

### Тема
Отвечает только за **отображение**:
- `archive-doctors.php` — архив врачей (форма фильтров + карточки)
- `single-doctors.php` — страница одного врача

Такой подход позволяет:
- не привязывать данные к теме
- не ломать основной loop WordPress
- сохранить корректную пагинацию

---

## Установка проекта

### 1. Клонировать репозиторий

```bash
git clone https://github.com/USERNAME/wp-test.git
cd wp-test
```

### 2. Запустить Docker

```bash
docker compose up -d
```

### 3. Открыть в браузере

http://localhost:8080/

---

## Архитектурные решения

Custom Post Type и таксономии вынесены в плагин,
чтобы данные не зависели от темы.

Фильтрация и сортировка реализованы через pre_get_posts,
что позволяет сохранить корректную пагинацию и не переопределять основной loop.

Шаблоны архива и одиночной записи выполняют роль view и не содержат бизнес-логики.

Все входные данные обрабатываются и экранируются (sanitize_*, esc_*).

---

## Структура проекта

```text
wp-content/
├── plugins/
│   └── doctors-plugin/
│       ├── post-type.php
│       ├── taxonomies.php
│       ├── metaboxes.php
│       └── filters.php
└── themes/
    └── custom-theme/
        ├── archive-doctors.php
        └── single-doctors.php
```
